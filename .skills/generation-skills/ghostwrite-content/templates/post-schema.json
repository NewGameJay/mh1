{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Generated Post Schema",
  "description": "Schema for individual generated posts in the ghostwrite-content skill",
  "type": "object",
  "required": ["postId", "content", "metadata"],
  "properties": {
    "postId": {
      "type": "string",
      "description": "Unique post identifier (format: batch-N-post-M or calendarRunId-NNN)",
      "pattern": "^(batch-\\d+-post-\\d+|[a-z]+-[a-z]+-\\d{4}-\\d{2}-\\d{2}-\\d{3})$"
    },
    "content": {
      "type": "string",
      "description": "Full post text ready for publishing",
      "minLength": 50,
      "maxLength": 3000
    },
    "metadata": {
      "type": "object",
      "required": ["templateId", "funnelStage", "voiceConfidence"],
      "properties": {
        "templateId": {
          "type": "integer",
          "description": "ID of the LinkedIn template used",
          "minimum": 1,
          "maximum": 100
        },
        "templateName": {
          "type": "string",
          "description": "Human-readable template name"
        },
        "funnelStage": {
          "type": "string",
          "enum": ["TOFU", "MOFU", "BOFU"],
          "description": "Marketing funnel stage"
        },
        "characterCount": {
          "type": "integer",
          "description": "Character count of the post content",
          "minimum": 50
        },
        "voiceConfidence": {
          "type": "number",
          "description": "Voice authenticity confidence score (1-10)",
          "minimum": 1,
          "maximum": 10
        },
        "topicId": {
          "type": "string",
          "description": "Reference to the source topic"
        },
        "topic": {
          "type": "string",
          "description": "Topic title/description"
        },
        "angle": {
          "type": "string",
          "description": "Specific angle or approach for the post"
        },
        "sourceType": {
          "type": "string",
          "enum": ["thought-leader", "parallel-event", "strategic", "social-listening"],
          "description": "Type of content source"
        },
        "sourceRef": {
          "type": "string",
          "description": "Reference path to source document (e.g., thoughtLeaders/abc123)"
        },
        "inspirationSummary": {
          "type": "string",
          "description": "Brief summary of the inspiration source"
        },
        "relevanceScore": {
          "type": "number",
          "description": "Relevance score from source data",
          "minimum": 0,
          "maximum": 10
        }
      }
    },
    "voiceContractApplied": {
      "type": "object",
      "description": "Details of how the voice contract was applied",
      "properties": {
        "sentenceAvgLength": {
          "type": "number",
          "description": "Average words per sentence"
        },
        "signaturePhrasesUsed": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Signature phrases from voice contract used in post"
        },
        "constraintsValidated": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Anti-patterns and constraints that were validated"
        },
        "toneMatch": {
          "type": "string",
          "description": "Primary tone achieved in the post"
        },
        "vocabularyLevel": {
          "type": "string",
          "enum": ["simple", "moderate", "technical", "academic"],
          "description": "Vocabulary complexity level used"
        },
        "sentenceStructure": {
          "type": "string",
          "enum": ["short_punchy", "varied", "complex", "conversational"],
          "description": "Sentence structure pattern used"
        },
        "openingStyle": {
          "type": "string",
          "description": "Opening sentence style used (matched from founder examples)"
        },
        "closingStyle": {
          "type": "string",
          "description": "Closing style used (question, statement, CTA)"
        }
      }
    },
    "scheduling": {
      "type": "object",
      "description": "Scheduling information for the post",
      "properties": {
        "scheduledWeek": {
          "type": "integer",
          "description": "Week number in the content calendar"
        },
        "scheduledDate": {
          "type": "string",
          "format": "date",
          "description": "Scheduled publication date"
        },
        "scheduledDay": {
          "type": "string",
          "enum": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"],
          "description": "Day of the week"
        },
        "scheduledTime": {
          "type": "string",
          "description": "Scheduled time (e.g., '09:00 AM ET')"
        }
      }
    },
    "qaStatus": {
      "type": "object",
      "description": "QA review status and details",
      "properties": {
        "status": {
          "type": "string",
          "enum": ["pass", "fail", "needs-manual-review"],
          "description": "Overall QA status"
        },
        "issues": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "type": { "type": "string" },
              "severity": { "type": "string", "enum": ["critical", "warning", "info"] },
              "location": { "type": "string" },
              "text": { "type": "string" },
              "fix": { "type": "string" }
            }
          },
          "description": "List of QA issues found"
        },
        "regenerationAttempts": {
          "type": "integer",
          "description": "Number of regeneration attempts"
        },
        "citationsVerified": {
          "type": "boolean",
          "description": "Whether all citations were verified"
        }
      }
    },
    "publishing": {
      "type": "object",
      "description": "Publishing lifecycle tracking (for Firestore)",
      "properties": {
        "status": {
          "type": "string",
          "enum": ["draft", "scheduled", "published", "archived"],
          "default": "draft"
        },
        "publishedAt": {
          "type": "string",
          "format": "date-time",
          "description": "Actual publication timestamp"
        },
        "publishedUrl": {
          "type": "string",
          "format": "uri",
          "description": "URL to the published post"
        }
      }
    },
    "engagement": {
      "type": "object",
      "description": "Post-publish engagement metrics",
      "properties": {
        "likes": { "type": "integer", "default": 0 },
        "comments": { "type": "integer", "default": 0 },
        "shares": { "type": "integer", "default": 0 },
        "impressions": { "type": "integer", "default": 0 },
        "lastSyncedAt": {
          "type": "string",
          "format": "date-time",
          "description": "Last time engagement metrics were synced"
        }
      }
    },
    "timestamps": {
      "type": "object",
      "properties": {
        "generatedAt": {
          "type": "string",
          "format": "date-time"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "format": "date-time"
        }
      }
    }
  }
}
