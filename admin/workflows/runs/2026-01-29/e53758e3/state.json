{
  "current_step": 5,
  "outputs": {
    "discovery": {
      "total_contacts": 10,
      "by_stage": {
        "subscriber": 2,
        "sql": 2,
        "customer": 3,
        "lead": 3
      },
      "contacts": {
        "subscriber": [
          {
            "id": "contact_0",
            "email": "user0@example.com",
            "firstname": "User",
            "lastname": "0",
            "company": "Acme Corp",
            "lifecyclestage": "subscriber"
          },
          {
            "id": "contact_7",
            "email": "user7@example.com",
            "firstname": "User",
            "lastname": "7",
            "company": "StartupX",
            "lifecyclestage": "subscriber"
          }
        ],
        "sql": [
          {
            "id": "contact_1",
            "email": "user1@example.com",
            "firstname": "User",
            "lastname": "1",
            "company": "Acme Corp",
            "lifecyclestage": "sql"
          },
          {
            "id": "contact_9",
            "email": "user9@example.com",
            "firstname": "User",
            "lastname": "9",
            "company": "TechCo",
            "lifecyclestage": "sql"
          }
        ],
        "customer": [
          {
            "id": "contact_2",
            "email": "user2@example.com",
            "firstname": "User",
            "lastname": "2",
            "company": "BigBrand",
            "lifecyclestage": "customer",
            "usage": {
              "last_active_days": 53,
              "login_trend": 1,
              "feature_adoption": 0.6358782998754832
            }
          },
          {
            "id": "contact_5",
            "email": "user5@example.com",
            "firstname": "User",
            "lastname": "5",
            "company": "Enterprise Inc",
            "lifecyclestage": "customer",
            "usage": {
              "last_active_days": 32,
              "login_trend": 1,
              "feature_adoption": 0.22763070896204773
            }
          },
          {
            "id": "contact_6",
            "email": "user6@example.com",
            "firstname": "User",
            "lastname": "6",
            "company": "BigBrand",
            "lifecyclestage": "customer",
            "usage": {
              "last_active_days": 48,
              "login_trend": 1,
              "feature_adoption": 0.4485478953581131
            }
          }
        ],
        "lead": [
          {
            "id": "contact_3",
            "email": "user3@example.com",
            "firstname": "User",
            "lastname": "3",
            "company": "StartupX",
            "lifecyclestage": "lead"
          },
          {
            "id": "contact_4",
            "email": "user4@example.com",
            "firstname": "User",
            "lastname": "4",
            "company": "Acme Corp",
            "lifecyclestage": "lead"
          },
          {
            "id": "contact_8",
            "email": "user8@example.com",
            "firstname": "User",
            "lastname": "8",
            "company": "BigBrand",
            "lifecyclestage": "lead"
          }
        ]
      },
      "data_validation": {
        "valid": true,
        "record_count": 10,
        "field_coverage": {
          "email": 1.0,
          "company": 1.0,
          "lifecyclestage": 1.0
        },
        "issues": [],
        "warnings": [
          "Below recommended: 10 < 100 recommended"
        ]
      },
      "source": "hubspot"
    },
    "enrichment": {
      "subscriber": [
        {
          "id": "contact_0",
          "email": "user0@example.com",
          "firstname": "User",
          "lastname": "0",
          "company": "Acme Corp",
          "lifecyclestage": "subscriber"
        },
        {
          "id": "contact_7",
          "email": "user7@example.com",
          "firstname": "User",
          "lastname": "7",
          "company": "StartupX",
          "lifecyclestage": "subscriber"
        }
      ],
      "sql": [
        {
          "id": "contact_1",
          "email": "user1@example.com",
          "firstname": "User",
          "lastname": "1",
          "company": "Acme Corp",
          "lifecyclestage": "sql"
        },
        {
          "id": "contact_9",
          "email": "user9@example.com",
          "firstname": "User",
          "lastname": "9",
          "company": "TechCo",
          "lifecyclestage": "sql"
        }
      ],
      "customer": [
        {
          "id": "contact_2",
          "email": "user2@example.com",
          "firstname": "User",
          "lastname": "2",
          "company": "BigBrand",
          "lifecyclestage": "customer",
          "usage": {
            "last_active_days": 53,
            "login_trend": 1,
            "feature_adoption": 0.6358782998754832
          }
        },
        {
          "id": "contact_5",
          "email": "user5@example.com",
          "firstname": "User",
          "lastname": "5",
          "company": "Enterprise Inc",
          "lifecyclestage": "customer",
          "usage": {
            "last_active_days": 32,
            "login_trend": 1,
            "feature_adoption": 0.22763070896204773
          }
        },
        {
          "id": "contact_6",
          "email": "user6@example.com",
          "firstname": "User",
          "lastname": "6",
          "company": "BigBrand",
          "lifecyclestage": "customer",
          "usage": {
            "last_active_days": 48,
            "login_trend": 1,
            "feature_adoption": 0.4485478953581131
          }
        }
      ],
      "lead": [
        {
          "id": "contact_3",
          "email": "user3@example.com",
          "firstname": "User",
          "lastname": "3",
          "company": "StartupX",
          "lifecyclestage": "lead"
        },
        {
          "id": "contact_4",
          "email": "user4@example.com",
          "firstname": "User",
          "lastname": "4",
          "company": "Acme Corp",
          "lifecyclestage": "lead"
        },
        {
          "id": "contact_8",
          "email": "user8@example.com",
          "firstname": "User",
          "lastname": "8",
          "company": "BigBrand",
          "lifecyclestage": "lead"
        }
      ]
    },
    "analysis": {
      "stage_counts": {
        "subscriber": 2,
        "lead": 3,
        "mql": 0,
        "sql": 2,
        "opportunity": 0,
        "customer": 3,
        "evangelist": 0
      },
      "conversions": [
        {
          "from_stage": "subscriber",
          "to_stage": "lead",
          "from_count": 2,
          "to_count": 3,
          "rate": 1.5,
          "benchmark": 0.4
        },
        {
          "from_stage": "lead",
          "to_stage": "mql",
          "from_count": 3,
          "to_count": 0,
          "rate": 0.0,
          "benchmark": 0.3
        },
        {
          "from_stage": "sql",
          "to_stage": "opportunity",
          "from_count": 2,
          "to_count": 0,
          "rate": 0.0,
          "benchmark": 0.35
        },
        {
          "from_stage": "customer",
          "to_stage": "evangelist",
          "from_count": 3,
          "to_count": 0,
          "rate": 0.0,
          "benchmark": 0.25
        }
      ],
      "bottlenecks": [
        {
          "from_stage": "lead",
          "to_stage": "mql",
          "from_count": 3,
          "to_count": 0,
          "rate": 0.0,
          "benchmark": 0.3,
          "gap": 0.3,
          "severity": "high"
        },
        {
          "from_stage": "sql",
          "to_stage": "opportunity",
          "from_count": 2,
          "to_count": 0,
          "rate": 0.0,
          "benchmark": 0.35,
          "gap": 0.35,
          "severity": "high"
        },
        {
          "from_stage": "customer",
          "to_stage": "evangelist",
          "from_count": 3,
          "to_count": 0,
          "rate": 0.0,
          "benchmark": 0.25,
          "gap": 0.25,
          "severity": "high"
        }
      ],
      "context_handling": {
        "strategy": "inline",
        "input_size_tokens": 422,
        "chunks_processed": 0,
        "sub_calls": []
      }
    },
    "scoring": {
      "at_risk": [
        {
          "email": "user2@example.com",
          "name": "User 2",
          "company": "BigBrand",
          "stage": "customer",
          "risk_score": 0.6,
          "risk_factors": {
            "days_inactive": 53,
            "negative_trend": false
          }
        },
        {
          "email": "user5@example.com",
          "name": "User 5",
          "company": "Enterprise Inc",
          "stage": "customer",
          "risk_score": 0.6,
          "risk_factors": {
            "days_inactive": 32,
            "negative_trend": false
          }
        },
        {
          "email": "user6@example.com",
          "name": "User 6",
          "company": "BigBrand",
          "stage": "customer",
          "risk_score": 0.6,
          "risk_factors": {
            "days_inactive": 48,
            "negative_trend": false
          }
        }
      ],
      "upsell_candidates": []
    },
    "synthesis": {
      "recommendations": [
        {
          "priority": "high",
          "category": "conversion",
          "action": "Improve lead \u2192 mql conversion",
          "context": "Current: 0%, Benchmark: 30%",
          "impact": "Could recover 0 accounts",
          "suggested_tactics": [
            "Review nurture sequence for leads",
            "A/B test call-to-action messaging",
            "Analyze drop-off points in conversion path"
          ]
        },
        {
          "priority": "high",
          "category": "conversion",
          "action": "Improve sql \u2192 opportunity conversion",
          "context": "Current: 0%, Benchmark: 35%",
          "impact": "Could recover 0 accounts",
          "suggested_tactics": [
            "Review nurture sequence for sqls",
            "A/B test call-to-action messaging",
            "Analyze drop-off points in conversion path"
          ]
        },
        {
          "priority": "high",
          "category": "conversion",
          "action": "Improve customer \u2192 evangelist conversion",
          "context": "Current: 0%, Benchmark: 25%",
          "impact": "Could recover 0 accounts",
          "suggested_tactics": [
            "Review nurture sequence for customers",
            "A/B test call-to-action messaging",
            "Analyze drop-off points in conversion path"
          ]
        },
        {
          "priority": "high",
          "category": "retention",
          "action": "Launch re-engagement campaign for 3 at-risk accounts",
          "context": "Average risk score: 60%",
          "impact": "Potential save of 3 accounts",
          "suggested_tactics": [
            "Personal outreach from CSM",
            "Offer exclusive content or training",
            "Review product friction points"
          ]
        }
      ],
      "health_score": 0.36
    }
  },
  "tenant_id": "test_tenant"
}